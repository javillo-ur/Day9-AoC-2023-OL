Console.WriteLine(new List<string[]>(){File.ReadAllLines("input.txt")}.Select(j => j.Select(r => r.Split(" ").Where(t => int.TryParse(t, out _)).Select(j => int.Parse(j)).ToList())).Select(j => j.Select(sequence => sequence.Aggregate(new List<List<int>>(){sequence.ToList()} as IEnumerable<List<int>>, (previous, current) => previous.Append(new(Enumerable.Range(1, previous.Last().Count - 1).Aggregate(new List<int>() as IEnumerable<int>, (aux, i) => aux.Append(previous.Last()[i] - previous.Last()[i-1]))))))).Select(j => j.Select(seqs => Enumerable.Range(1, seqs.Count() - 1).Aggregate(new Tuple<int,int>(seqs.Reverse().ToList()[1].First(), 0), (last, i) => new Tuple<int, int>(seqs.Reverse().ToList()[i].First(), last.Item1 - last.Item2)))).First().Sum(t => t.Item1 - t.Item2));